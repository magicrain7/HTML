<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <select name="gender" id="gender" onchange="onCahngeFunc()">
        
        <option value="Male">Male</option>
        <option value="Female">Female</option>
    </select>
    <p id="show"></p>
    <script>
        var jsonData = [{ "id": 1, "first_name": "Mary", "last_name": "Rieme", "email": "mrieme0@nationalgeographic.com", "gender": "Female" },
        { "id": 2, "first_name": "Darbee", "last_name": "Rowter", "email": "drowter1@posterous.com", "gender": "Male" },
        { "id": 3, "first_name": "Artus", "last_name": "Tollerton", "email": "atollerton2@booking.com", "gender": "Male" },
        { "id": 4, "first_name": "Inesita", "last_name": "Waith", "email": "iwaith3@sfgate.com", "gender": "Female" },
        { "id": 5, "first_name": "Fernande", "last_name": "Langstaff", "email": "flangstaff4@cbsnews.com", "gender": "Female" },
        { "id": 6, "first_name": "Carly", "last_name": "Billborough", "email": "cbillborough5@cbc.ca", "gender": "Male" },
        { "id": 7, "first_name": "Francis", "last_name": "Prantl", "email": "fprantl6@sohu.com", "gender": "Male" },
        { "id": 8, "first_name": "Ilyse", "last_name": "Mintoff", "email": "imintoff7@fastcompany.com", "gender": "Female" },
        { "id": 9, "first_name": "Martie", "last_name": "Petty", "email": "mpetty8@canalblog.com", "gender": "Male" },
        { "id": 10, "first_name": "Cob", "last_name": "Greson", "email": "cgreson9@themeforest.net", "gender": "Male" },
        { "id": 11, "first_name": "Janaye", "last_name": "Lude", "email": "jludea@taobao.com", "gender": "Female" },
        { "id": 12, "first_name": "Marcella", "last_name": "Sarfatti", "email": "msarfattib@printfriendly.com", "gender": "Female" },
        { "id": 13, "first_name": "Annabela", "last_name": "Klehyn", "email": "aklehync@wiley.com", "gender": "Female" },
        { "id": 14, "first_name": "Bondie", "last_name": "Rablan", "email": "brabland@tumblr.com", "gender": "Male" },
        { "id": 15, "first_name": "Lurleen", "last_name": "Nashe", "email": "lnashee@blogs.com", "gender": "Female" }]
        console.log(jsonData);

        function onCahngeFunc(){
        var newAry = jsonData.map(function(o,i,a) {
            o.first_name = o.first_name.toUpperCase();
            return o;
        });

        console.log(newAry);

        var filterAry = newAry.filter(function(o,i){
            return o.gender == document.getElementById("gender").value;
        });

        console.log(filterAry);
        var $show = document.getElementById("show");
        //기존화면요소 지워주기.
        var cnt = $show.children.length; //해당되는 하위요소가 몇개가 되는지 속성값을 가지고 있다.
        for(var i = 0; i < cnt; i++) {
            $show.removeChild($show.firstChild);
        }

        //하위자식으로 등록.
        filterAry.forEach(function(a){
            var $text = document.createTextNode(a.first_name + ", " +a.gender);
            var $li = document.createElement("li");
            $li.appendChild($text);
            $show.appendChild($li);
        });

    }

        //https://jsdev.kr/t/for-in-vs-for-of/2938 확장 for문 
    </script>
</body>

</html>